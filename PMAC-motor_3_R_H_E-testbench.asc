Version 4
SHEET 1 2196 1684
WIRE -624 -144 -672 -144
WIRE -672 -112 -672 -144
WIRE -672 -16 -672 -32
WIRE -800 48 -896 48
WIRE -768 48 -800 48
WIRE -896 64 -896 48
WIRE -624 64 -672 64
WIRE -800 80 -800 48
WIRE -672 96 -672 64
WIRE 1040 144 1040 96
WIRE 1088 144 1088 96
WIRE 1136 144 1136 96
WIRE -112 160 -272 160
WIRE 1392 160 1232 160
WIRE -896 176 -896 144
WIRE -800 176 -800 144
WIRE -672 192 -672 176
WIRE -112 192 -144 192
WIRE 240 192 176 192
WIRE 944 192 896 192
WIRE 1280 192 1232 192
WIRE 1568 192 1568 176
WIRE 1696 192 1696 176
WIRE 1840 192 1840 176
WIRE 240 224 176 224
WIRE 944 224 896 224
WIRE -112 240 -272 240
WIRE 1392 240 1232 240
WIRE -624 272 -672 272
WIRE -144 272 -144 192
WIRE -112 272 -144 272
WIRE 1280 272 1280 192
WIRE 1280 272 1232 272
WIRE 288 288 176 288
WIRE 416 288 288 288
WIRE 944 288 672 288
WIRE -672 304 -672 272
WIRE 416 304 416 288
WIRE -112 320 -272 320
WIRE 240 320 176 320
WIRE 672 320 672 288
WIRE 944 320 896 320
WIRE 1392 320 1232 320
WIRE 1568 320 1568 272
WIRE 1696 320 1696 272
WIRE 1696 320 1568 320
WIRE 1840 320 1840 272
WIRE 1840 320 1696 320
WIRE -144 352 -144 272
WIRE -112 352 -144 352
WIRE 1280 352 1280 272
WIRE 1280 352 1232 352
WIRE -144 368 -144 352
WIRE -672 400 -672 384
WIRE -16 416 -16 368
WIRE 32 416 32 368
WIRE 80 416 80 368
WIRE 1040 416 1040 368
WIRE 1088 416 1088 368
WIRE 1136 416 1136 368
WIRE 1280 416 1280 352
WIRE 1696 416 1696 320
WIRE 416 432 416 384
WIRE 672 432 672 400
FLAG 416 432 0
FLAG -144 368 0
FLAG -272 320 W
FLAG 288 288 shaft
FLAG 240 320 Pos
FLAG -672 -16 0
FLAG -624 -144 U
FLAG -672 192 0
FLAG -624 64 V
FLAG -672 400 0
FLAG -624 272 W
FLAG -272 160 U
FLAG -272 240 V
FLAG -768 48 f
FLAG -896 176 0
FLAG -800 176 0
FLAG 672 432 0
FLAG 1280 416 0
FLAG 1392 160 gen_U
FLAG 1392 240 gen_V
FLAG 1392 320 gen_W
FLAG 1696 416 0
FLAG 1568 176 gen_U
FLAG 1696 176 gen_V
FLAG 1840 176 gen_W
SYMBOL res 400 288 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL bv -672 -128 R0
SYMATTR InstName B1
SYMATTR Value V=cos(v(f)*2*pi)*100
SYMBOL bv -672 80 R0
SYMATTR InstName B2
SYMATTR Value V=cos(v(f)*2*pi+2*pi/3)*100
SYMBOL bv -672 288 R0
SYMATTR InstName B3
SYMATTR Value V=cos(v(f)*2*pi+4*pi/3)*100
SYMBOL current -896 144 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PWL(0 0 10 0 40 200m)
SYMBOL cap -816 80 R0
SYMATTR InstName C2
SYMATTR Value 1
SYMBOL voltage 672 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL(0 0 10 0 60 -3)
SYMBOL res 1552 176 R0
SYMATTR InstName R2
SYMATTR Value {Rgen}
SYMBOL res 1680 176 R0
SYMATTR InstName R3
SYMATTR Value {Rgen}
SYMBOL res 1824 176 R0
SYMATTR InstName R4
SYMATTR Value {Rgen}
SYMBOL motor_3_R_H 16 256 R0
SYMATTR InstName X1
SYMATTR SpiceLine L_Leak=1 R={R} Kt=1 IP=1 Inertia=100m VHALL=5
SYMBOL motor_3_R_H_E 1104 256 M0
SYMATTR InstName X2
SYMATTR SpiceLine L_Leak=1m R=1m Kt=3 ENC_RES=128
TEXT -1000 800 Left 0 !.tran 100
TEXT 344 192 Left 0 !.ic V(shaft)=0
TEXT -432 496 Left 0 !.param R=100
TEXT -824 432 Left 0 ;Here three phase voltage source (with variable frequency) is used to drive \nthe PMAC motor. This is absolutely a bad idea in real world...
TEXT 1656 48 Left 0 !.param Rgen=1
TEXT 1448 -40 Left 0 ;This uses PMAC as a generator
TEXT 776 440 Left 0 ;Note that the shaft voltage equals to shaft rotation speed (radians per second)\nand the shaft current equals to shaft torque in Newton-meters
